<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°æ®å¯è§†åŒ–ä¸ Charts - JSæ•™ç¨‹</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/tutorial.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="logo">
                <h1>JS æ•™ç¨‹</h1>
            </div>
            <ul class="nav-links">
                <li><a href="../index.html">è¿”å›é¦–é¡µ</a></li>
                <li><a href="advanced-8-patterns.html">ä¸Šä¸€ç« </a></li>
            </ul>
        </nav>
    </header>

    <main class="tutorial-content">
        <div class="breadcrumb">
            <a href="../index.html">é¦–é¡µ</a> &gt; è¿›é˜¶æ•™ç¨‹ &gt; æ•°æ®å¯è§†åŒ–ä¸ Charts
        </div>

        <h1>æ•°æ®å¯è§†åŒ–ä¸ Charts</h1>

        <div class="section">
            <h2>ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®å¯è§†åŒ–?</h2>
            <p>æ•°æ®å¯è§†åŒ–æ˜¯å°†æ•°æ®è½¬æ¢ä¸ºå›¾å½¢è¡¨ç¤ºçš„è¿‡ç¨‹ï¼Œå¸®åŠ©ç”¨æˆ·æ›´ç›´è§‚åœ°ç†è§£å’Œåˆ†ææ•°æ®ã€‚åœ¨ç°ä»£ Web åº”ç”¨ä¸­ï¼Œå›¾è¡¨æ˜¯å±•ç¤ºæ•°æ®çš„é‡è¦æ–¹å¼ã€‚</p>

            <ul>
                <li>ğŸ“Š ç›´è§‚å±•ç¤ºæ•°æ®è¶‹åŠ¿</li>
                <li>ğŸ“ˆ å¿«é€Ÿå‘ç°æ•°æ®æ¨¡å¼</li>
                <li>ğŸ¯ æå‡ç”¨æˆ·ä½“éªŒ</li>
                <li>ğŸ’¡ æ”¯æŒæ•°æ®é©±åŠ¨å†³ç­–</li>
            </ul>
        </div>

        <div class="section">
            <h2>Chart.js ç®€ä»‹</h2>
            <p>Chart.js æ˜¯æœ€æµè¡Œçš„ JavaScript å›¾è¡¨åº“ä¹‹ä¸€ï¼Œç®€å•æ˜“ç”¨ï¼Œæ”¯æŒå¤šç§å›¾è¡¨ç±»å‹ã€‚</p>

            <ul>
                <li>âœ… è½»é‡çº§ (~200KB)</li>
                <li>âœ… å“åº”å¼è®¾è®¡</li>
                <li>âœ… åŠ¨ç”»æ•ˆæœ</li>
                <li>âœ… æ”¯æŒå¤šç§å›¾è¡¨ç±»å‹</li>
                <li>âœ… é«˜åº¦å¯å®šåˆ¶</li>
                <li>âœ… è‰¯å¥½çš„ TypeScript æ”¯æŒ</li>
            </ul>

            <div class="code-block">
<pre><code>// å®‰è£…
npm install chart.js

// æˆ–ä½¿ç”¨ CDN
&lt;script src="https://cdn.jsdelivr.net/npm/chart.js"&gt;&lt;/script&gt;</code></pre>
            </div>
        </div>

        <div class="section">
            <h2>åŸºæœ¬ä½¿ç”¨</h2>
            <div class="code-block">
<pre><code>// HTML
&lt;canvas id="myChart"&gt;&lt;/canvas&gt;

// JavaScript
const ctx = document.getElementById('myChart').getContext('2d');

const myChart = new Chart(ctx, {
    type: 'bar', // å›¾è¡¨ç±»å‹
    data: {
        labels: ['ä¸€æœˆ', 'äºŒæœˆ', 'ä¸‰æœˆ', 'å››æœˆ', 'äº”æœˆ', 'å…­æœˆ'],
        datasets: [{
            label: 'é”€å”®é¢',
            data: [12, 19, 3, 5, 2, 3],
            backgroundColor: 'rgba(54, 162, 235, 0.2)',
            borderColor: 'rgba(54, 162, 235, 1)',
            borderWidth: 1
        }]
    },
    options: {
        responsive: true,
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});</code></pre>
            </div>
        </div>

        <div class="section">
            <h2>å›¾è¡¨ç±»å‹</h2>

            <h3>1. æŸ±çŠ¶å›¾</h3>
            <div class="code-block">
<pre><code>new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['A', 'B', 'C', 'D'],
        datasets: [{
            label: 'æ•°æ®é›† 1',
            data: [10, 20, 15, 25],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)'
            ],
            borderWidth: 1
        }]
    }
});</code></pre>
            </div>

            <h3>2. æŠ˜çº¿å›¾</h3>
            <div class="code-block">
<pre><code>new Chart(ctx, {
    type: 'line',
    data: {
        labels: ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ'],
        datasets: [{
            label: 'è¶‹åŠ¿',
            data: [65, 59, 80, 81, 56],
            fill: false,
            borderColor: 'rgb(75, 192, 192)',
            tension: 0.1 // æ›²çº¿å¹³æ»‘åº¦
        }]
    },
    options: {
        elements: {
            line: {
                tension: 0.4
            }
        }
    }
});</code></pre>
            </div>

            <h3>3. é¥¼å›¾</h3>
            <div class="code-block">
<pre><code>new Chart(ctx, {
    type: 'pie',
    data: {
        labels: ['çº¢è‰²', 'è“è‰²', 'é»„è‰²'],
        datasets: [{
            data: [300, 50, 100],
            backgroundColor: [
                'rgb(255, 99, 132)',
                'rgb(54, 162, 235)',
                'rgb(255, 205, 86)'
            ],
            hoverOffset: 4
        }]
    }
});</code></pre>
            </div>

            <h3>4. ç¯å½¢å›¾</h3>
            <div class="code-block">
<pre><code>new Chart(ctx, {
    type: 'doughnut',
    data: {
        labels: ['ç±»åˆ« A', 'ç±»åˆ« B', 'ç±»åˆ« C'],
        datasets: [{
            data: [10, 20, 30],
            backgroundColor: [
                '#FF6384',
                '#36A2EB',
                '#FFCE56'
            ],
            hoverOffset: 4
        }]
    },
    options: {
        cutout: '50%' // ä¸­å¿ƒåœ†å¤§å°
    }
});</code></pre>
            </div>

            <h3>5. æåæ ‡å›¾</h3>
            <div class="code-block">
<pre><code>new Chart(ctx, {
    type: 'polarArea',
    data: {
        labels: ['çº¢è‰²', 'è“è‰²', 'é»„è‰²', 'ç»¿è‰²', 'æ©™è‰²'],
        datasets: [{
            data: [11, 16, 7, 3, 14],
            backgroundColor: [
                'rgb(255, 99, 132)',
                'rgb(75, 192, 192)',
                'rgb(255, 205, 86)',
                'rgb(201, 203, 207)',
                'rgb(54, 162, 235)'
            ]
        }]
    }
});</code></pre>
            </div>

            <h3>6. é›·è¾¾å›¾</h3>
            <div class="code-block">
<pre><code>new Chart(ctx, {
    type: 'radar',
    data: {
        labels: ['é€Ÿåº¦', 'åŠ›é‡', 'è€åŠ›', 'æŠ€å·§', 'æ™ºåŠ›'],
        datasets: [{
            label: 'è¿åŠ¨å‘˜ A',
            data: [85, 90, 75, 80, 85],
            fill: true,
            backgroundColor: 'rgba(255, 99, 132, 0.2)',
            borderColor: 'rgb(255, 99, 132)',
            pointBackgroundColor: 'rgb(255, 99, 132)'
        }, {
            label: 'è¿åŠ¨å‘˜ B',
            data: [90, 85, 80, 90, 75],
            fill: true,
            backgroundColor: 'rgba(54, 162, 235, 0.2)',
            borderColor: 'rgb(54, 162, 235)',
            pointBackgroundColor: 'rgb(54, 162, 235)'
        }]
    }
});</code></pre>
            </div>
        </div>

        <div class="section">
            <h2>é«˜çº§é…ç½®</h2>

            <h3>å¤šæ•°æ®é›†</h3>
            <div class="code-block">
<pre><code>const myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ'],
        datasets: [{
            label: '2023',
            data: [65, 59, 80, 81, 56],
            backgroundColor: 'rgba(255, 99, 132, 0.2)',
            borderColor: 'rgba(255, 99, 132, 1)'
        }, {
            label: '2024',
            data: [28, 48, 40, 19, 86],
            backgroundColor: 'rgba(54, 162, 235, 0.2)',
            borderColor: 'rgba(54, 162, 235, 1)'
        }]
    }
});</code></pre>
            </div>

            <h3>è‡ªå®šä¹‰å·¥å…·æç¤º</h3>
            <div class="code-block">
<pre><code>const myChart = new Chart(ctx, {
    type: 'bar',
    data: { /* ... */ },
    options: {
        plugins: {
            tooltip: {
                callbacks: {
                    label: function(context) {
                        const label = context.dataset.label || '';
                        const value = context.parsed.y;
                        const total = context.chart.data.datasets.reduce((acc, ds) => {
                            return acc + ds.data[context.dataIndex];
                        }, 0);
                        const percentage = ((value / total) * 100).toFixed(1);

                        return `${label}: ${value} (${percentage}%)`;
                    }
                }
            }
        }
    }
});</code></pre>
            </div>

            <h3>å“åº”å¼é…ç½®</h3>
            <div class="code-block">
<pre><code>const myChart = new Chart(ctx, {
    type: 'bar',
    data: { /* ... */ },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: {
                display: true,
                position: 'top',
                labels: {
                    font: {
                        size: 14
                    }
                }
            }
        }
    }
});</code></pre>
            </div>

            <h3>è‡ªå®šä¹‰é¢œè‰²</h3>
            <div class="code-block">
<pre><code>// åŠ¨æ€ç”Ÿæˆé¢œè‰²
function generateColors(count) {
    const colors = [];
    for (let i = 0; i < count; i++) {
        const hue = (i * 360 / count) % 360;
        colors.push(`hsl(${hue}, 70%, 60%)`);
    }
    return colors;
}

const myChart = new Chart(ctx, {
    type: 'pie',
    data: {
        labels: ['A', 'B', 'C', 'D', 'E'],
        datasets: [{
            data: [10, 20, 30, 40, 50],
            backgroundColor: generateColors(5)
        }]
    }
});</code></pre>
            </div>
        </div>

        <div class="section">
            <h2>åŠ¨æ€æ›´æ–°å›¾è¡¨</h2>
            <div class="code-block">
<pre><code>// æ·»åŠ æ•°æ®
function addData(chart, label, data) {
    chart.data.labels.push(label);
    chart.data.datasets.forEach((dataset) => {
        dataset.data.push(data);
    });
    chart.update();
}

// åˆ é™¤æ•°æ®
function removeData(chart) {
    chart.data.labels.pop();
    chart.data.datasets.forEach((dataset) => {
        dataset.data.pop();
    });
    chart.update();
}

// æ›´æ–°ç‰¹å®šæ•°æ®ç‚¹
function updateData(chart, index, newValue) {
    chart.data.datasets[0].data[index] = newValue;
    chart.update();
}

// æ›¿æ¢æ‰€æœ‰æ•°æ®
function replaceData(chart, newData) {
    chart.data.datasets[0].data = newData;
    chart.update();
}</code></pre>
            </div>
        </div>

        <div class="section">
            <h2>æœ€ä½³å®è·µ</h2>

            <h3>1. æ€§èƒ½ä¼˜åŒ–</h3>
            <div class="code-block">
<pre><code>// ç¦ç”¨åŠ¨ç”»æé«˜æ€§èƒ½
const myChart = new Chart(ctx, {
    type: 'bar',
    data: { /* ... */ },
    options: {
        animation: {
            duration: 0 // ç¦ç”¨åŠ¨ç”»
        },
        interaction: {
            mode: 'index',
            intersect: false
        }
    }
});

// å¤§æ•°æ®é›†ä¼˜åŒ–
const myChart = new Chart(ctx, {
    type: 'line',
    data: { /* å¤§é‡æ•°æ® */ },
    options: {
        parsing: {
            xAxisKey: 'x',
            yAxisKey: 'y'
        },
        plugins: {
            decimation: {
                enabled: true,
                algorithm: 'lttb'
            }
        }
    }
});</code></pre>
            </div>

            <h3>2. å¯è®¿é—®æ€§</h3>
            <div class="code-block">
<pre><code>// æ·»åŠ å¯è®¿é—®æ€§æè¿°
&lt;canvas id="myChart" role="img" aria-label="é”€å”®æ•°æ®å›¾è¡¨"&gt;&lt;/canvas&gt;

const myChart = new Chart(ctx, {
    type: 'bar',
    data: { /* ... */ },
    options: {
        plugins: {
            accessible: {
                enabled: true,
                title: '2024å¹´é”€å”®æ•°æ®',
                description: 'æ˜¾ç¤ºå„æœˆä»½é”€å”®é¢çš„æŸ±çŠ¶å›¾'
            }
        }
    }
});</code></pre>
            </div>

            <h3>3. ä¸»é¢˜åˆ‡æ¢</h3>
            <div class="code-block">
<pre><code>// äº®è‰²ä¸»é¢˜
const lightTheme = {
    color: '#666',
    grid: {
        color: '#e0e0e0'
    },
    ticks: {
        color: '#666'
    }
};

// æš—è‰²ä¸»é¢˜
const darkTheme = {
    color: '#fff',
    grid: {
        color: '#333'
    },
    ticks: {
        color: '#fff'
    }
};

// åº”ç”¨ä¸»é¢˜
function applyTheme(chart, theme) {
    chart.options.scales.x = theme;
    chart.options.scales.y = theme;
    chart.update();
}</code></pre>
            </div>
        </div>

        <div class="section">
            <h2>å®æˆ˜ç¤ºä¾‹</h2>

            <h3>å®æ—¶æ•°æ®æ›´æ–°</h3>
            <div class="code-block">
<pre><code>// åˆ›å»ºå®æ—¶æ›´æ–°çš„å›¾è¡¨
const ctx = document.getElementById('realtimeChart');
const realtimeChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: [],
        datasets: [{
            label: 'å®æ—¶æ•°æ®',
            data: [],
            borderColor: 'rgb(75, 192, 192)',
            tension: 0.1
        }]
    },
    options: {
        animation: {
            duration: 0
        },
        scales: {
            x: {
                display: false
            }
        }
    }
});

// æ¯ç§’æ·»åŠ æ–°æ•°æ®
setInterval(() => {
    const now = new Date();
    const value = Math.random() * 100;

    realtimeChart.data.labels.push(now.toLocaleTimeString());
    realtimeChart.data.datasets[0].data.push(value);

    // åªä¿ç•™æœ€è¿‘ 20 ä¸ªæ•°æ®ç‚¹
    if (realtimeChart.data.labels.length > 20) {
        realtimeChart.data.labels.shift();
        realtimeChart.data.datasets[0].data.shift();
    }

    realtimeChart.update();
}, 1000);</code></pre>
            </div>
        </div>

        <div class="section">
            <h2>å…¶ä»–å›¾è¡¨åº“</h2>

            <h3>ECharts</h3>
            <p>ç™¾åº¦çš„ ECharts åŠŸèƒ½å¼ºå¤§ï¼Œé€‚åˆå¤æ‚å¯è§†åŒ–éœ€æ±‚ã€‚</p>

            <div class="code-block">
<pre><code>// å®‰è£…
npm install echarts

// åŸºæœ¬ä½¿ç”¨
import * as echarts from 'echarts';

const chart = echarts.init(document.getElementById('chart'));
const option = {
    title: { text: 'ç¤ºä¾‹å›¾è¡¨' },
    tooltip: {},
    xAxis: { data: ['è¡¬è¡«', 'ç¾Šæ¯›è¡«', 'é›ªçººè¡«', 'è£¤å­', 'é«˜è·Ÿé‹', 'è¢œå­'] },
    yAxis: {},
    series: [{
        name: 'é”€é‡',
        type: 'bar',
        data: [5, 20, 36, 10, 10, 20]
    }]
};
chart.setOption(option);</code></pre>
            </div>

            <h3>Recharts (React)</h3>
            <p>React ç”Ÿæ€ä¸­æµè¡Œçš„å›¾è¡¨åº“ï¼Œå£°æ˜å¼ APIã€‚</p>

            <div class="code-block">
<pre><code>// å®‰è£…
npm install recharts

// ä½¿ç”¨
import { BarChart, Bar, XAxis, YAxis, Tooltip, Legend } from 'recharts';

const data = [
    { name: 'Page A', uv: 4000, pv: 2400 },
    { name: 'Page B', uv: 3000, pv: 1398 },
];

function MyChart() {
    return (
        &lt;BarChart width={600} height={300} data={data}&gt;
            &lt;XAxis dataKey="name" /&gt;
            &lt;YAxis /&gt;
            &lt;Tooltip /&gt;
            &lt;Legend /&gt;
            &lt;Bar dataKey="uv" fill="#8884d8" /&gt;
            &lt;Bar dataKey="pv" fill="#82ca9d" /&gt;
        &lt;/BarChart&gt;
    );
}</code></pre>
            </div>
        </div>

        <div class="section">
            <h2>é€‰æ‹©åˆé€‚çš„å›¾è¡¨åº“</h2>
            <ul>
                <li><strong>Chart.js</strong> - ç®€å•æ˜“ç”¨ï¼Œé€‚åˆå¤§å¤šæ•°åœºæ™¯</li>
                <li><strong>ECharts</strong> - åŠŸèƒ½å¼ºå¤§ï¼Œé€‚åˆå¤æ‚å¯è§†åŒ–</li>
                <li><strong>Recharts</strong> - React é¡¹ç›®é¦–é€‰</li>
                <li><strong>D3.js</strong> - å®Œå…¨è‡ªå®šä¹‰ï¼Œé€‚åˆé«˜çº§ç”¨æˆ·</li>
                <li><strong>Chart.js + React-Chartjs-2</strong> - React é›†æˆ Chart.js</li>
            </ul>
        </div>

        <div class="navigation">
            <a href="advanced-8-patterns.html" class="nav-button prev">â† ä¸Šä¸€ç« : è®¾è®¡æ¨¡å¼å’Œä»£ç æ¨¡å¼</a>
            <a href="../index.html" class="nav-button next">è¿”å›é¦–é¡µ â†’</a>
        </div>
    </main>

    <footer>
        <p>&copy; 2024 JavaScript å­¦ä¹ ç½‘ç«™. All rights reserved.</p>
    </footer>
</body>
</html>